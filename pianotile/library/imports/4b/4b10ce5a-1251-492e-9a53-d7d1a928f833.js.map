{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\main-script.js"],"names":["cc","Class","extends","Component","editor","properties","movePanel","Node","bluePrefab","Prefab","whitePrefab","blackPrefab","initRow","initCol","_newTopRow","_curBottomRow","_curTouchRow","_startPosition","_isFirstTile","_start","onLoad","position","row","randomBlackCol","Math","floor","random","col","tile","instantiate","getComponent","init","addChild","name","pMult","v2","console","log","move","movePosition","x","y","runAction","sequence","moveTo","callFunc","updateRender","bind","prefab","type","oldRow","getChildByName","removeFromParent"],"mappings":"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","file":"main-script.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\n\textends: cc.Component,\n\n\teditor: {\n\t\t//executeInEditMode: true\n\t},\n\n\tproperties: {\n\t\tmovePanel: cc.Node,\n\t\tbluePrefab: cc.Prefab,\n\t\twhitePrefab: cc.Prefab,\n\t\tblackPrefab: cc.Prefab,\n\t\tinitRow: 6,\n\t\tinitCol: 4,\n\t\t_newTopRow: null,\n\t\t_curBottomRow: null,\n\t\t_curTouchRow: -1,\n\t\t_startPosition: null,\n\t\t_isFirstTile: true,\n\t\t_start: false,\n\t},\n\n\tonLoad: function () {\n\t\t//加载 填满 屏幕中央\n\t\tthis._curBottomRow = 0;\n\t\tthis._newTopRow = 6;\n\t\tthis._startPosition = this.movePanel.position;\n\n\t\tfor(let row = 0; row < 6; row++){\n\t\t\tlet randomBlackCol = Math.floor(Math.random() * 4);\n\t\t\tfor(let col = 0; col < 4; col++){\n\t\t\t\tlet tile = null;\n\t\t\t\tif(randomBlackCol === col){\n\t\t\t\t\tif(this._isFirstTile) {\n\t\t\t\t\t\tthis._isFirstTile = false\n\t\t\t\t\t\ttile = cc.instantiate(this.bluePrefab);\n\t\t\t\t\t\ttile.getComponent(\"tile-script\").init(\"start\", this);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttile = cc.instantiate(this.blackPrefab);\n\t\t\t\t\t\ttile.getComponent(\"tile-script\").init(\"black\",this);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\ttile = cc.instantiate(this.whitePrefab);\n\t\t\t\t\ttile.getComponent(\"tile-script\").init(\"white\",this);\n\t\t\t\t}\n\t\t\t\tthis.movePanel.addChild(tile);\n\t\t\t\ttile.name = row + \"#\" + col;\n\t\t\t\ttile.position = cc.pMult(cc.v2(col, row), 150);\n\t\t\t\tconsole.log('tile.position', tile.position)\n\t\t\t}\n\t\t}\n\t},\n\n\tmove: function(){\n\t\tconst movePosition = cc.v2(this._startPosition.x,(this._startPosition.y + (this._curBottomRow + 1) * -150));\n\t\tconsole.log('move movePosition', movePosition)\n\t\tconsole.log('move this.movePanel', this.movePanel)\n\t\tthis.movePanel.runAction(cc.sequence(\n\t\t\tcc.moveTo(0.2, movePosition),\n\t\t\tcc.callFunc(this.updateRender.bind(this))\n\t\t))\n\t},\n\n\tupdateRender : function(){\n\t\tlet row = this._newTopRow;\n\t\tlet randomBlackCol = Math.floor(Math.random() * 4);\n\t\tfor(let col = 0; col < 4; col++){\n\t\t\tlet tile = null,\n\t\t\t\tprefab = randomBlackCol === col? this.blackPrefab : this.whitePrefab,\n\t\t\t\ttype = randomBlackCol === col? \"black\" : \"white\"\n\t\t\ttile = cc.instantiate(prefab);\n\t\t\ttile.getComponent(\"tile-script\").init(type, this);\n\t\t\tthis.movePanel.addChild(tile);\n\t\t\ttile.name = row + \"#\" + col;\n\t\t\ttile.position = cc.pMult(cc.v2(col,row), 150);\n\t\t}\n\t\t//remove bottom row\n\t\tlet oldRow = this._curBottomRow;\n\t\tfor(let col = 0; col < 4; col++){\n\t\t\tthis.movePanel.getChildByName(oldRow + \"#\" + col).removeFromParent();\n\t\t}\n\t\tthis._curBottomRow++;\n\t\tthis._curTouchRow++;\n\t\tthis._newTopRow++;\n\t},\n\n\t// update: function (dt) {\n\t//\n\t// },\n\n});\n"]}